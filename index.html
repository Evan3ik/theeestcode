<html>
<head>
<meta charset="utf-8">
<title>valve software</title>
<script>


function cipherRot12(str) {
    
    var alphabets =['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'," ", "-", "_", ".", "&","?", "!", "@", "#", "/", "=", 'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];
    
    var alphabets12 = ['M', 'N','O','P','Q','R','S','T','U','V','W','X','Y','Z','A','B','C','D','E','F','G','H','I','J','K','L', " ", "-", "_", ".", "&","?", "!", "@", "#", "/", "=", 'm','n','o','p','q','r','s','t','u','v','w','x','y','z','a','b','c','d','e','f','g','h','i','j','k','l'];
    
    var resultStr = [];
    for(let i=0; i<str.length; i++){
        for(let j =0; j<alphabets.length; j++){
            if(str[i] === alphabets[j]){
                     resultStr.push(alphabets12[j])
            }
        }
    }
    return resultStr.join("");
  };


function cipherRotm12(str) {
    
    var alphabets12 =['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'," ", "-", "_", ".", "&","?", "!", "@", "#", "/", "=", 'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];
    
    var alphabets = ['M', 'N','O','P','Q','R','S','T','U','V','W','X','Y','Z','A','B','C','D','E','F','G','H','I','J','K','L', " ", "-", "_", ".", "&","?", "!", "@", "#", "/", "=", 'm','n','o','p','q','r','s','t','u','v','w','x','y','z','a','b','c','d','e','f','g','h','i','j','k','l'];
    
    var resultStr = [];
    for(let i=0; i<str.length; i++){
        for(let j =0; j<alphabets.length; j++){
            if(str[i] === alphabets[j]){
            resultStr.push(alphabets12[j]);
            } 
        }
    }
    return resultStr.join("");
  };



document.addEventListener("DOMContentLoaded", function() {
    const twoZero = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", '"', "'", ".", "/", "*", "&", "^", "%", "$", "#", "!", "(", ")", "<", ">", "?", "!", ";", ":", "=", "+", "-"]
    const form = document.getElementById("inputform");
    const input = document.getElementById("input");
    const output = document.getElementById("output");
    const outType = document.getElementById("code");
    form.addEventListener("submit", function(e) {
        const oT = outType.value
        if (oT == "encode") {
            var binary = ""
              for (var i = 0; i < input.value.length; i++) {
                  if (twoZero.indexOf(input.value[i]) < 0) {
                  binary += "0" + input.value[i].charCodeAt(0).toString(2) + " ";
                  } else {
                      binary += "00" + input.value[i].charCodeAt(0).toString(2) + " ";
                  }
              }
              console.log(binary)
              binary = btoa(binary)
              binary = cipherRot12(binary)
              output.value = binary
              
        }
        if (oT == "decode") {
            var binary = input.value
            binary = cipherRotm12(binary)
            binary = atob(binary)
            var binString = '';
            binary.split(' ').map(function(bin) {
                binString += String.fromCharCode(parseInt(bin, 2));
            });
            binString = binString.substring(0, binString.length - 1)
            output.value = binString
        }
        e.preventDefault();
    });
});
</script>
<style>
body {
    background: #020D39;
    color: black;
    font-family: sans-serif;
}

code {
    background: lightgrey;
    padding: 2px;
    border-radius: 5px;
    color: black;
}


#container, #outcontainer {
    background: #4A4A4A;
    text-align: center;
    width: 50%;
    margin: 64px auto;
    padding: 16px;
    border: 10px solid black;
    border-radius: 16px;
}

#flexcontainer {
    display: flex;
}

#flexcontainer, * {
    flex-grow: 1;
}

textarea {
    width: 320px;
    height: 160px;
}
</style>
</head>
<body>
<div id="container">
    <div id="flexcontainer">
        
        <form id="inputform">
            <br>
            
            <label for="code">Type:</label>
            <select name="code" id="code">
                <option value="encode">Encode</option>
                <option value="decode">Decode</option>
            </select>
            <br>
            <label for="input" style="color:White">Text:</label>
            <br>
            <textarea spellcheck="false" name="input" id="input" required></textarea>
            <br>
            <input type="submit" value="Convert"> 
        </form>
        </div>
    </div>
<div id="outcontainer">
    <div id="outflexcontainer">
        <form id="outinputform">
            <br>
            <label for="input" style="color:White">Output:</label>
            <br>
            <textarea spellcheck="false" name="output" id="output" required></textarea>
            <br>
        </form>
        </div>
    </div>
</body>
</html>
